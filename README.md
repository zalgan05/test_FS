# Тестовое задание для Фабрики Решений

## Описание проекта

Сервис управления SMS рассылками и получения статистики по ним.

## Локальный запуск сервиса в Docker 

Склонировать репозиторий на свой компьютер и перейти в корневую папку:
```python
git clone git@github.com:zalgan05/test_FS.git
cd test_FS
```

Создать в корневой папке файл .env с переменными окружения, необходимыми
для работы приложения.

Пример содержимого файла:
```
EMAIL_LIST='example@mail.ru,example@gmail.com'
EMAIL_HOST_USER = 'example2@gmail.com'
EMAIL_HOST_PASSWORD = 'xxxxxxxxxxxxxxxx'

API_TOKEN='xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx' # Токен для отправки сообщений по адресу https://probe.fbrq.cloud/docs

USE_SQLITE='false' # значение true запустит сервер на sqlite3
DEBUG='false'

POSTGRES_USER=django_user
POSTGRES_PASSWORD=mysecretpassword
POSTGRES_DB=django
DB_HOST=db
DB_PORT=5432
```

Из корневой директории запустить сборку контейнеров с помощью
docker-compose:
```python
docker-compose up -d
```

## API документация

Документацию по API в формате OpenAPI можно посмотреть [здесь](https://app.swaggerhub.com/apis/ZALGAN_1/api_notification_service/0.0.0)

## Дополнительные задания

* Подготовлен docker-compose для запуска всех сервисов проекта одной командой (3)
* По адресу /api/docs/ открывается страница со Swagger UI с описанием разработанного API (5)
* Реализован сервис, который раз в сутки в 20:00 по МСК отправляет статистику по обработанным рассылкам за прошедшие сутки на указанные email (8)
* Организована обработка ошибок и откладывание запросов при неуспехе для последующей повторной отправки (9)
* Реализовать дополнительная бизнес-логика: добавлены в сущность "рассылка" поля "временной интервал", в которых можно задать промежуток времени, в котором клиентам можно отправлять сообщения с учётом их локального времени. Не отправлять клиенту сообщение, если его локальное время не входит в указанный интервал (11)
* Обеспечено подробное логирование на всех этапах обработки запросов (12)

## Технологии

* Python 3.9.10
* Django 3.2
* Django REST framework 3.13
* Nginx
* Docker
* Postgres 13.10
* Celery 5.3.6
* Redis 5.0.1
